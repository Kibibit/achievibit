/*!
 * timezones - A jQuery plugin to turn a select box into a timezone selector
 * v0.1.0
 * https://github.com/firstandthird/timezones
 * copyright First+Third 2014
 * MIT License
*/
!function(a){var b={init:function(a,b){this.cities=[],this.formatName=b;for(var c in a)this.cities.push({name:a[c],offset:moment.tz(a[c]).format("Z")});this.cities.sort(function(a,b){return parseInt(a.offset.replace(":",""),10)-parseInt(b.offset.replace(":",""),10)}),this.html=this.getHTMLOptions(),this.currentTimezone=this.getCurrentTimezoneKey()},getHTMLOptions:function(){var a,b,c="",d=this.cities.length;for(a=0;d>a;a++)b=this.cities[a],c+='<option data-offset="'+b.offset+'" value="'+b.name+'">(GMT '+b.offset+") "+this.formatName(b.name)+"</option>";return c},addNames:function(b){return a(b).empty().append(a(this.html))},selectValue:function(b,c){c=c||this.currentTimezone;var d=a(b).find('option[data-offset="'+c+'"]');return d.length&&a(b).val(d.val()),a(b)},getCurrentTimezoneKey:function(){return moment().format("Z")},getCurrentOffset:function(){return parseInt(this.currentTimezone,10)}};a.fn.timezones=function(c){return"string"==typeof c?b[c].apply(b,Array.prototype.slice.call(arguments)):(c=a.extend({},a.fn.timezones.defaults,c),0!==c.tz.zones.length&&moment.tz.load(c.tz),c.formatName&&"function"==typeof c.formatName||(c.formatName=function(a){return a}),b.init(moment.tz.names(),c.formatName),this.each(function(){return b.addNames(this),b.selectValue(this),this}))},a.fn.timezones.defaults={tz:{zones:[]}}}(jQuery);